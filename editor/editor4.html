<html>
<head>
	<title>Full Text</title>
	<style>
	
	.startstop  {display: none;}
	.structured-events {display: none;}
	body {font-family: sans-serif;}
	table {font-size: 12px; }
	#remove {width: 100%;}
	#header {width: 100%;}
	/* #header div {background-color: white;  margin: 0.5%; float: left; } */
	/* #meeting {width: 25%; float: right;} */
	#free {width: 19%;}
	#navigation ul {padding: 0px;}
	#navigation ul li {list-style-type: none; display: inline; margin-right: 20px;}
	#texts {background-color: silver;}
	#hidden {background-color: yellow;}
	#titles {display: none;};
	#logo {margin-left: 10px; height: 65px; background-image:url('../img/logo.png'); background-repeat:no-repeat;}
	td {border: thin dotted navy;}
	.ruby td {border-color: #ff3333; border-style: solid;}
	/*.edited {background-color: #66ff66;} */
	.startevent {background-color: #66ff00}
	.stopevent {background-color: #00ffcc}
	div.editable
		{
			border: solid 2px Transparent;
			padding-left: 15px;
			padding-right: 15px;
		}

		div.editable:hover
		{
			border-color: blue;
		}
	
		#hidden, #debug, #island {display: none;}
		td.events {vertical-align: top;}
		table.events-table * {font-size: 10px;}
		table.events-table td {border: thin dotted #006666; };
		td.e-n {width: 20px; }
		td.e-time {width: 50px;}
		td.e-type  {width: 50px;}
		td.e-speaker {width: 70px;}
		
		
		
	</style>

	<style id="styles" type="text/css">
	.ui-layout-north {position: fixed;
	left: 0px;
	top: 0px;
	height: 150px;
	width: 100%;
	}
	#spacer {clear: both;}
	
	#header > div {float: left !important;
	width: 10%;}
	
	#header > div#player {width: 600px !important;}
	.ui-layout-north {
		background-color: #00cc99 !important;
	}
	#centerpane {margin-top: 150px !important;
	background-color: white;}
	/* #sm2-container {display: none;} */
	
	
		div.editable
		{
			border: solid 2px Transparent;
			padding-left: 15px;
			padding-right: 15px;
		}
/*
		div.editable:hover
		{
			border-color: black;
		}
*/

	</style>
	
	
	<link rel="stylesheet" type="text/css" href="../soundmanager/demo/page-player/css/page-player.css" />
	<link rel="stylesheet" type="text/css" href="../soundmanager/demo/page-player/flashblock/flashblock.css" />
	<link href="../soundmanager/demo/page-player/css/optional-annotations.css" type="text/css" rel="stylesheet">
<link href="css/player-specific.css" rel="stylesheet" type="text/css" />
	<link href="ckeditor/_samples/sample.css" rel="stylesheet" type="text/css" />
	<link href="jquery.layout.css" rel="stylesheet" type="text/css" />
	
	
	<script type="text/javascript" src="ckeditor/ckeditor.js"></script>
	
	
	<script type="text/javascript" src="ckeditor/ckeditor.js"></script>
<!--	<script src="ckeditor/_samples/sample.js" type="text/javascript"></script> --> 
	

	
	<script language="javascript" src="../js-lib/jquerytransform/js/jquery-1.6.4.js"></script>
	<script language="javascript" src="../js-lib/jquerytransform/js/jquery.transform.js"></script>
	<script language="javascript" src="../js-lib/jquerytransform/js/examplefunctions.js"></script>
	
	
	<script type="text/javascript" src="/exist/tullio/js-lib/jquery-hotkeys.js"></script>
	<script type="text/javascript" src="/exist/tullio/soundmanager/script/soundmanager2.js"></script>
	<script type="text/javascript" src="../soundmanager/demo/page-player/script/page-player.js"></script>
	<script type="text/javascript" src="../soundmanager/demo/page-player/script/optional-page-player-metadata.js"></script>
	
	
	<script type="text/javascript" src="js/player-specific.js"></script>
	
	<!--
	<script type="text/javascript" src="jquery-ui-1.8.16.custom.min.js"></script>
	
	<script type="text/javascript" src="jquery.layout.js"></script>
	
	<script type="text/javascript" src="jsxml.js"></script>-->

	
	<script>
	
	var noUpdate = false;
	var updateCounter = 0;
	var scrollState = 0;
	var lastVisible = -1;
	var start = "";
	var stop = "";
	var visibleRows = [];
	var visibles = "";
	var meeting = "2011-07-24-COMENVLEEF"; 
	var ids = "";
	var edited = "";
	var editor;	
	var popupStatus = 0;
	var pause = 0;
	var rowId;
	var asString = "";
	
	var titles = null;
	var titlesDoc;
	
	var xval = "bert";
	
	
	// variables containing editorial content
	
	var eventTypes;
	var speakers = ["Ampe", "Albissahri"];
	var government;
	var languages;
	var statusCodes;
	
	// variable containing list of team members
	
	
	var team = ["Bienne", "Céliné", "Laurence", "Veerle", "Anne", "Johan", "Anita", "Nathalie", "Carine", "Sophie", "Alain", "Jean-Pierre", "Thierry", "Vincent", "Bert", "Michel", "Bérénice", "Isabelle"];
	
	
	
	/* Utility function : get query parameters */
	
	(function($) {
    $.QueryString = (function(a) {
        if (a == "") return {};
        var b = {};
        for (var i = 0; i < a.length; ++i)
        {
            var p=a[i].split('=');
            if (p.length != 2) continue;
            b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
        return b;
    })(window.location.search.substr(1).split('&'))
})(jQuery);

// $.QueryString["param"]


var mmm = $.QueryString["m"];
var langChoice = "N";
// var langChoice = $.QueryString["l"];
var user = $.QueryString["u"];

	
	function jq(myid) {


   return '#' + myid.replace(/(:|\.)/g,'\\$1');
 }
	
	
	function loadPopup() {
	//loading popup with jQuery magic!
	//loads popup only if it is disabled
		if(popupStatus==0){
			$("#backgroundPopup").css({
					"opacity": "0.7"
			});
			$("#backgroundPopup").fadeIn("slow");
			$("#popupContact").fadeIn("slow");
			popupStatus = 1;
		}
	}


//centering popup
function centerPopup(){
//request data for centering
var windowWidth = document.documentElement.clientWidth;
var windowHeight = document.documentElement.clientHeight;
var popupHeight = $("#popupContact").height();
var popupWidth = $("#popupContact").width();
//centering
$("#popupContact").css({
"position": "absolute",
"top": "10%",
"left": "10%"
});
//only need force for IE6

$("#backgroundPopup").css({
"height": windowHeight
});

}
	
	
	

function secondstep(xml, xsl, xmlorig) {
	$("#hidden").transform({async:false, xmlobj:xml, xsl:"xsl/group.xsl"});
	// replace
	var rows = $("#hidden > tr");
	console.log("*****");
	console.log("rows: " + rows);
	console.log("rows-lenght: " + rows.length);
	console.log("edited: " + edited);
	console.log("ids: " + ids);
/*
	$(ids).wrapAll("<span id='replace' />");
	$("#replace").replaceWith(rows);
*/	
	var origrowIds = ids.split(',');

for (i=0; i<rows.length; i++) {
	//alert(rows[i]);
	console.log("0replace: " + origrowIds[i] + ":" + visibleRows[i] + ":" +edited);
	if (visibleRows[i] != edited.slice(0,-2)) {
		// alert("about to replace, it. " + updateCounter + "." + i);
		$("#result > tr" + origrowIds[i]).replaceWith($("#hidden > tr:eq(" + 0 + ")"));
		
		// alert("done");
	}
	else {
		$("#hidden > tr:eq(0)").remove();
	}
}



	$("#" + edited.replace(/\./g,"\\.")).addClass('edited');
	
	
}


function isVisible(id) {
	var cutoffTop = $(window).scrollTop();
	var cutoffBottom =  $(window).scrollTop() + $(window).height();
	var currTop = $("#" + id).offset().top;
	var currBottom = $("#" + id).offset().top + $("#" + id).height();


	if ( currTop > cutoffTop || currBottom  > cutoffTop || (currTop < cutoffTop && currBottom  > cutoffBottom) ) {
		return true;
		
	}
	else return false;
	
}




function updateVisibleTextsWhenEdit(rowId, colType) {
		// refreshes in two steps if there is a row in edit mode
	// colType is original / translation
	// Take the current row and walk backwards to find the first visible row
	
		var currId = rowId;
		while (isVisible(currId)) {
			console.log(currId);
			currId = $("#" + currId).prev().id;
			
		}
}




function updateVisibleTexts() {
	
	if ( noUpdate ) {
		return true;
	}
	
	
	
	$('#text-table tr').removeClass('ruby');

	// simply loop over all rows
	
	
	// ($("#syncCheck").is(':checked')) console.log("syncCheck -- value: " + $("#syncCheck").is(':checked'));
	
	if (($("#syncCheck").is(':checked'))) {
	
	visibles = "";
	visibleRows.length = 0;
	var cutoffTop = $(window).scrollTop();
	var cutoffBottom =  $(window).scrollTop() + $(window).height();
	var switchFirst = 0;	
	var switchStop = 0;
    $('#text-table > tbody > tr').each(function() {
				var currTop = $(this).offset().top;
				var currBottom = $(this).offset().top + $(this).height();
				// console.log(this.id + ': ' + cutoffTop + " " + cutoffBottom + " " + currTop + currBottom);
				
        if (currTop > cutoffTop || currBottom  > cutoffTop || (currTop < cutoffTop && currBottom  > cutoffBottom)) {
						// console.log('row ' + this.id + ' is visible');

						visibleRows.push(this.id);
						visibles += "#" + this.id + ",";
						
						if (switchFirst == 0) {
							start = this.id;
							switchFirst = 1;
						}
						
						if ($(this).offset().top > cutoffBottom) {
							switchStop = "1";
							stop = this.id;
							return false; // stops the iteration after the first invisible row 
						}
        }
    });
		
		scrollState = 0;
		if (switchStop==0) {
			// all rows are visible
			// take the id of the last row in the table as stop id
			stop = $('#text-table > tbody > tr:last').attr("id");
			console.log("using last row id: " + stop);
		};
	
	updateCounter++;
	console.log("start: " + start + " stop: " + stop);
//	console.log(visibleRows);
	ids = "#" + visibleRows.toString().replace(/,/g, ',#');
	ids = ids.replace(/\./g,"\\.");
	console.log("visible rows: " + ids);

	// highlight refreshed rows
	$(ids).addClass('ruby');
	// create request
	var request = "../xq/return-combined.xql?m=" + mmm + "&start=" + start.substring(1) + "&stop=" + stop.substring(1);
	console.log(request);
	
	
	
	// refresh the visible rows
	// query the DB for event and text data
	$.transform({dataType:"xml", success:secondstep, xml:request, xsl: "xsl/addclipref.xsl"});
		
	// wrap the rows in a div
	
	
	}
	 setTimeout("updateVisibleTexts()", 10000);

}  

function initialize(xml, xsl, xmlorig) {
	
	console.log('initializing...');
	
	jQuery.get( "/exist/tullio/xml/titles.xml", 
		function(data, textStatus, jqXHR) {
			
			console.log(data);
			
			x = data.documentElement;
			xml.getElementsByTagName("all")[0].appendChild(titles);
			
			console.log(xml);
			
			/*z = data.getElementsByTagName("reference");
			for (i=0; i<z.length; i++) {
				alert(z[i].childNodes[0].nodeValue);
			}
			*/
			
			$("#result").transform({cache:false, async:false, dataType:"xml", xmlobj:xml, xsl:"xsl/group.xsl"});
			
		},
		"xml" );
	
		/*
	z = xml.getElementsByTagName("edition");
			for (i=0; i<z.length; i++) {
				alert(z[i]);
			}
	
	console.log(xml);
			
	console.log('start transform');
	
	$("#result").transform({async:false, dataType:"xml", xmlobj:xml, xsl:"xsl/group.xsl"});
	*/
	
	// $("#debug").transform({async:false, dataType:"xml", xmlobj:xml, xsl:"xsl/group.xsl"});
	
	// load the macro data from the server
	// /exist/tullio/xml/titles.xml
	/*
	jQuery.get( "/exist/tullio/xml/titles.xml", 
		function(data, textStatus, jqXHR) {

			newel=data.createElement("edition");

			x=data.getElementsByTagName("all")[0].appendChild(newel);
			// x.appendChild(newel);
			z = data.getElementsByTagName("reference");
			for (i=0; i<z.length; i++) {
				alert(z[i].childNodes[0].nodeValue);
			}
		},
		"xml" );
	*/
	// add a node
	// process the combined result
	// display the result
	
	
	
	
		console.log('initializion end');
	
}

function islandSuccess(html,xsl,xml,obj) {
	alert("XML\r\nID: " + obj.xmlid + "\r\nXML: " + $("#" + obj.xmlid).html());
	var yet = $("#island").html();
	$("#result").transform({dataType:"xml", xmlstr:yet, xsl:"xsl/group.xsl"});
}


function addTitles(doc) {
	
	
	
	
}


$().ready(function(){
		
		
		
		
		eventTypes = {
			'N' : [['Mondelinge vraag','QO-MV'], ['Interpellatie','INT'], ['Dringende vraag','QA-DV'], ['Zaal: rumoer','NOISE'], ['Zaal: samenspraak','JUMBLE'], ['Verandering van voorzitter','PRES'], ['Onverstaanbaar','INC'], ['Motie','MOT']],
			'F' : [['',''], ['',''], ['',''], ['',''], ['',''], ['',''], ['',''], ['',''], ]
		};
		
		var asString = "";
		// variable titles does get defined although it cannot be logged
		
		
	      $.each(team, function(val, text) {
						console.log(team);
            $('#person').append(
                $('<option></option>').val(val).html(text)
            );
				});
		
		
		setUpPlayer();
		
		jQuery.get( "/exist/tullio/xml/titles.xml", 
			function(data, textStatus, jqXHR) {
				asString = (new XMLSerializer()).serializeToString(data);
				console.log('assigned var');
			
				
				// titles = data.documentElement;
				
			},
			"xml" );
		
		jQuery.ajax({
         url:    "/exist/tullio/xml/titles.xml",
         success: function(result) {
                      testeee = (new XMLSerializer()).serializeToString(result); 
											console.log(testeee);
											titlesAsString = testeee;
											titlesDoc = result;
											titles = result.documentElement;
                  },
         async:   false,
				 contentType: "text/xml"
    }); 
		

		$('#titles').html(titlesAsString);
		
		
		
		
		
		
		
		
		
/* DEBUG */

 /*
$.get("http://localhost:8080/exist/xquery/return-combined.xql", { m: "2011-07-24-COMENVLEEF"},
  function(data){
     alert("Data Loaded: " + data);
   });
	 
	 $.transform({el: "#island", xml: "http://localhost:8080/exist/xquery/return-combined.xq?m=2011-07-24-COMENVLEEF", xsl: "xsl/addclipref.xsl", island: true, success: islandSuccess}); 

*/
// $("#debug").transform({xml:"http://localhost:8080/exist/xquery/return-combined.xq?m=2011-07-24-COMENVLEEF", xsl:"xsl/addclipref.xsl"});

// var bad = $("#debug").html();

// console.log(bad);

// $("#result").transform({async:false, dataType:"xml", xmlstr:bad, xsl:"xsl/group.xsl"});

 
$("#overview").text(mmm);


			$.get("../xq/initialize.xql", {
							"meeting": mmm
					}, function(data) {
							// alert("Data Loaded: " + data);
					});
			
		$.transform({ dataType:"xml", success:initialize, xml: "../xq/return-combined.xql?m=" + mmm, xsl: "xsl/addclipref.xsl"});



		
/*		
		CKEDITOR.replace( 'editor1', 
		{
			height: "100%",
			resize_enabled : true,
			toolbar : [ [ 'Source', '-', 'Bold', 'Italic', 'Underline', 'Strike','-','Link', '-', 'MyButton' ] ]
		});
*/		
//		$('body').layout({ applyDefaultStyles: true });
		
/*		$.transform({dataType:"xml", success:initialize, xml: "http://localhost:8080/exist/xquery/return-combined.xq?m=2011-07-24-COMENVLEEF", xsl: "xsl/addclipref.xsl"});
	*/	
	 setTimeout("updateVisibleTexts()", 5000);
		
		$(window).scroll(function(){
			scrollState = 1;
		});
		
		
	
		
		
		
						

		$("#text-table td").live("dblclick", 
			function(){
				
				var locked = false;		
// editReqCat = this.id.slice(-1,1) == 'o' ? 'orig' : 'trans';
editReqId = this.id.slice(1,-2);
author = $("#person option:selected").text();
				
var request = $.ajax({
  url: "../xq/lock.xql",
  type: "POST",
  data: {
							"v": $(this).hasClass("orig") ? "orig" : "trans",
							"n": editReqId,
							"id": author,
							"m": mmm
					},
  async: false
});

request.done(function(msg) {
  msgString =  (new XMLSerializer()).serializeToString(msg);
		console.log( msgString);
		if (msgString.indexOf('success')=='-1') {
			locked = true;
		}
});

request.fail(function(jqXHR, textStatus) {
  alert( "Request failed: " + textStatus );
			locked = true;
});
				




				console.log("clicked: " + this.id);
				// try to acquire a lock
				
				if ( locked ) {alert("locked"); locked= false; return false;}
				
				// check if another clip is being edited, store text and clean up
				if ( edited != '' ) {
					$("#cke").attr('id', '');
					$(jq(edited)).removeClass("editmode");
					
					
					var clipid = edited.slice(1,-2);
					var stop = $(jq("stopevent-" + clipid)).text();
					
					
					
					var cat = $(this).hasClass("orig") ? "orig" : "trans";
					var status = $(jq("status" + clipid)).text();
					
					var editedcontent = "<wrapper n='" + clipid + "'>" + editor.getData().replace(/[&][#]160[;]/gi," ") + "</wrapper>";
					
					console.log(editedcontent);
					
					/*
					jsxml.fromFile('http://localhost:8080/exist/Cuberdon/jquerytransform/xsl/wrap.xsl', function(xsl){
							var xml = jsxml.fromString(editedcontent);
							var resultString = jsxml.transReady(xml, xsl);
							console.log(resultString);
					});
					*/
					
					/*
					jsxml.trans(editedcontent, 'jquerytransform/xsl/wrap.xsl', function(resultString){
							console.log(resultString);
					});
					
					
					
					var xsl = '<?xml version="1.0" encoding="UTF-8"?>' +
                    '\n<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">' +
                    '<xsl:output method="xml"/>' +
                    '<xsl:variable name="number" select="wrapper/@n"/>' +
                    '<xsl:template match="/">' +
                    '<wrapper>' +
                    '<xsl:apply-templates select="wrapper/*"/>' +
                    '</wrapper>' +
                    '</xsl:template>' +
                    '<xsl:template match="*">' +
                    '<xsl:copy>' +
                    '<xsl:attribute name="n">' +
                    '<xsl:value-of select="$number"/>' +
                    '</xsl:attribute>' +
                    '<xsl:copy-of select="text()"/>' +
                    '</xsl:copy>' +
                    '</xsl:template>' +
                    '</xsl:stylesheet>';
					*/
					// var resultString = jsxml.transReady(editedcontent, 'jquerytransform/xsl/wrap.xsl');
					
					// console.log(resultString);
					
					
					
					// remove troublemakers
					
					
					
					
					
					
					//alert(stopevent);
					
					
//					alert(editedcontent);
					
					// update events
					
					
					// store everything on the server
					
					
					
					
					$.post("../xq/storeClipEdit.xql", {
							"status": status, 
							"text": editedcontent,
							"cat": cat,
							"start": clipid,
							"stop": stop,
							"meeting": mmm
					}, function(data) {
							// alert("Data Loaded: " + data);
					});
					
				
					console.log(status + cat + clipid + stop + meeting);
					var old = $(this).offset().top;
					
					$.post("../xq/unlock.xql", {
							"v": cat,
							"n": clipid,
							"id": author,
							"m": mmm
					}, function(data) {
							// alert("Data Loaded: " + data);
					});
					
					
				

					
					
					
					
					
					
					
					editor.destroy();
					
					
					
					
					
					// scroll yr text into view
					
					var newe = $(this).offset().top;
					var z = $("body").scrollTop();
					var diff = newe - old;
					$("body").scrollTop(newe + z - 100);
					console.log("oud:" + old + " nieuw:" + newe + " scrolltop:" + z + " scrolltop-nieuw:" + diff + z);
				}
				
				
					
				
				
				
				
				
				
				edited = this.id;
				
				//$(this).children("div").children().wrapAll('<div id="cke">');
				
				rowId = this.parentNode.id;
				$(this).addClass("editmode");
				$(this).children("div:first-child").attr('id', 'cke');
				
					if ( editor ) editor.destroy();

					// make editor same size as replaced div
					
					
					function testSave() {
					console.log("save");
					
					}
					
	editor = CKEDITOR.replace( 'cke', {
					toolbar: [['Ajaxsave','Source', 'Transform', 'Maximize', 'Templates', 'Abbr', 'Status']],
					extraPlugins : 'ajaxsave,transform,abbr,status',
					disableNativeSpellChecker: false,
					startupFocus: true,
					templates_files : [ 'ckeditor/plugins/templates/templates/default.js' ],
					entities_processNumerical: 'force',
					saveFunction : testSave()
			});


editor.on( 'contentDom', function( evt )
    {
        editor.document.on( 'keyup', function(event)
        {
            if(event.data.$.keyCode == 17) isCtrl=false;
        });

        editor.document.on( 'keydown', function(event)
        {
            if(event.data.$.keyCode == 17) isCtrl=true;
            if(event.data.$.keyCode == 83 && isCtrl == true)
            {
                //The preventDefault() call prevents the browser's save popup to appear.
                //The try statement fixes a weird IE error.
                try {
                    event.data.$.preventDefault();
                } catch(err) {}
console.log('save key');
                //Call to your save function
			lastSound = pagePlayer.lastSound.sID;
			console.log(lastSound);
			soundManager.pause(lastSound);
                return false;
            }
        });

    }, editor.element.$);	
				
				
				
	//			updateVisibleTextsWhenEdit(rowId);
			
	
				}
				
		
		);
		
});

	</script>
	
	
</head>
<body >
<div  class="ui-layout-north">
  <div id="resultpane"></div>
  <div id="header">
    <div id="meeting"><span id="overview"></span>
			<p>Je suis: <select id="person"></select></p>
		</div>
	  <div id="logo"></div>
	  <div id="navigation">
	    <ul>
		    <li><a href="../xq/list-collections.xql">Meetings Overview</a></li>
		    <li><a href="../xq/collection-status.xql">Status Page</a></li>
	    </ul>
    </div>
	  <div id="player">
	    <div id="recording">Audioplayer</div>
	    <div id='controls'>
		    <ul>
			    <li id='toStart'>PLAY FROM START</li>
			    <li id='startStop'>PLAY / PAUSE</li>
			    
			    <li id="rewind">REWIND</li>
					<li id='forward'>FORWARD</li>
		    </ul>
	    </div>
	    <div id="alerts">
	      <p>LOADING</p>
	    </div>
	  </div>
	  <div id="settings">
      <input type="checkbox" id="syncCheck" name="syncing">Keep Syncing</input>
	  </div>
  </div>
</div>
<div id="spacer">&#160;</div>
<div id="centerpane" class="ui-layout-center">
<div id="tempPlayerLinks">
<div id="clip1">
<p class='load'>LOAD AUDIO 1</p>
<div id="playlistWrapper">
<ul class="playlist hidden">

  <li class="last"><a id='mpl' href="../../recordings/201112250915.mp3">09:15</a><span class="offset">start: 00:07</span>
	<div class="metadata">
    <div class="duration">4:43</div> <!-- total track time (for positioning while loading, until determined -->
    <ul>
     <li><p>Electric razor</p><span>0:00</span></li> <!-- first scene -->
     <li><p>Water, scissors</p><span>2:41</span></li> <!-- start time of second scene -->
     <li><p>More razor work</p><span>4:00</span></li>
    </ul>
  </div>
	</li>
</ul>



</div>

<div id="clip2">
<p class='load'>LOAD AUDIO 2</p>
<div class="playlistWrapper">
<ul class="playlist hidden">

  <li class="last"><a id='someId' href="../../recordings/201112250915.mp3">09:30</a><span class="offset">00:07</span>
	<div class="metadata">
    <div class="duration">3:20</div> <!-- total track time (for positioning while loading, until determined -->
    <ul>
     <li><p>Start</p><span>0:30</span></li> <!-- first scene -->
     <li><p>Needle</p><span>0:45</span></li> <!-- start time of second scene -->
     <li><p>Haystack</p><span>2:00</span></li>
    </ul>
  </div>
	</li>
</ul>



</div>



</div>

	<div id="tablewrapper">
		<table id="text-table">
			<tbody id ="result"></tbody>
		</table>
	</div>
</div>



<div id="titles"></div>
<div id="hidden"></div>
<div id="debug"></div>

<div id="island"></div>
<div id="ref"></div>
<script>
		window.onbeforeunload = function () {
        return("Hello");
    };
</script>

</body>
